<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Edit Sheet</title>
		<link rel="stylesheet" href="styles/styles.css" />
		<link rel="stylesheet" href="styles/edit.css" />
		<script>
			window.serverDepartments = <%- JSON.stringify(departments || []) %>;
		</script>
		<script type="module" src="js/edit.js" defer></script>
	</head>
	<body>
		<header>
			<nav class="navigation-bar">
				<h1>Green River College</h1>
				<button id="sign-in-button">Sign in</button>
			</nav>
		</header>
		<main>
			<form id="page-form" class="content-container" action="" method="get">
				<fieldset id="div-select-set" class="top-section fieldset">
					<label for="division-select">Choose a Division</label>
					<select name="division" id="division-select">
						<option value="">-- Select division --</option>
						<% if (typeof departments !== 'undefined' && departments.length) {
						%> <% departments.forEach(function (d) { %>
						<option
							value="<%= d.divisionName %>"
							data-dean="<%= d.deanName %>"
							data-pen="<%= d.penContact %>"
							data-loc="<%= d.locRep %>"
							data-chair="<%= d.chairName %>"
						>
							<%= d.divisionName %>
						</option>
						<% }); %> <% } %>
					</select>

					<label for="dean-input">Dean: </label>
					<input
						type="text"
						id="dean-input"
						name="dean-input"
						class="input-fields"
						required
						disabled
					/>
					<span class="error" id="err-dean">Please input a name Dean name</span>

					<label for="pen-input">PEN Contact: </label>
					<input
						type="text"
						id="pen-input"
						name="pen-input"
						class="input-fields"
						required
						disabled
					/>
					<span class="error" id="err-pen"
						>Please input a name for PEN Contact</span
					>

					<label for="loc-input">LOC Representative: </label>
					<input
						type="text"
						id="loc-input"
						name="loc-input"
						class="input-fields"
						required
						disabled
					/>
					<span class="error" id="err-loc"
						>Please input a name for LOC Representative</span
					>

					<label for="chair-input">Chair: </label>
					<input
						type="text"
						id="chair-input"
						name="chair-input"
						class="input-fields"
						required
						disabled
					/>
					<span class="error" id="err-chair"
						>Please input a name for Chair</span
					>
				</fieldset>

				<section id="programs-container" class="container">
					<% if (departments && departments.length) { %> <%
					departments.forEach(function (division) { %> <%
					division.programList.forEach(function (p) { %>
					<fieldset
						class="program"
						id="<%= p.programName %>-program"
						style="display: none"
					>
						<p class="p-title"><%= p.programName %></p>

						<section class="payee-container program-sections">
							<% let payeeIndex = 1; for (const [name, amount] of
							Object.entries(p.payees)) { %>
							<div class="payee-item">
								<label for="music-payee-<%= payeeIndex %>"
									>Payee #<%= payeeIndex %></label
								>
								<div class="program-payee-input-section grid">
									<input
										type="text"
										id="music-payee-<%= payeeIndex %>"
										value="<%= name %>"
										disabled
										style="
											background-color: rgb(238, 238, 238);
											cursor: not-allowed;
										"
									/>
									<input
										type="number"
										id="music-payee-<%= payeeIndex %>-money"
										value="<%= amount %>"
										placeholder="$"
										step="0.01"
										disabled
										style="
											background-color: rgb(238, 238, 238);
											cursor: not-allowed;
										"
									/>
									<button
										type="button"
										class="remove-payee-btn"
										disabled
										style="display: none"
									>
										Remove
									</button>
								</div>
							</div>
							<% payeeIndex++; } %>
						</section>

						<fieldset class="program-money-section">
							<div>
								<label>Has been paid</label>
								<input type="checkbox" <%= p.hasBeenPaid ? "checked" : "" %> />
							</div>
							<hr />
							<div>
								<label>Submitted</label>
								<input type="checkbox" <%= p.reportSubmitted ? "checked" : "" %>
								/>
							</div>
						</fieldset>

						<fieldset class="program-notes-section">
							<label>Notes</label>
							<textarea><%= p.notes %></textarea>
						</fieldset>

						<div class="program-buttons">
							<button type="button">Edit</button>
							<button type="button" style="display: none">Save Program</button>
							<button type="button" style="display: none">Cancel</button>
						</div>
					</fieldset>
					<% }); %> <% }); %> <% } %>
				</section>
			</form>
		</main>
	</body>
</html>
